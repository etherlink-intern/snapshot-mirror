version: '3.8'

services:
  snapshot-mirror:
    build: .
    container_name: snapshot-mirror
    restart: unless-stopped
    environment:
      - TARGET_DIR=/snapshots
      - KEEP_COUNT=1
      - SYNC_INTERVAL=21600 # Sync every 6 hours
    volumes:
      - snapshot-data:/snapshots

volumes:
  snapshot-data:
    driver: local
    driver_opts:
      type: cifs
      device: "//<SYNOLOGY_IP>/<SHARE_NAME>"
      o: "username=<USER>,password=<PASSWORD>,vers=3.0,uid=1000,gid=1000"
